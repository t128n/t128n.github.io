---
import BaseLayout from "@/layouts/base.astro";
import Avatar from "@/assets/avatar.svg";
import Image from "astro/components/Image.astro";
import { Icon } from "astro-icon/components";
---

<BaseLayout>
  <a href="/cv.pdf" class="border-b border-black/30 text-xs text-black/50 flex justify-end gap-1 hover:font-semibold cursor-pointer">
    <span>Download as PDF</span>
  </a>
  <div
    id="resume"
    class="h-[297mm] flex flex-col gap-8 print:m-0 print:p-0 print:shadow-none"
  >
    <!-- Profile Header -->
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-4">
        <Image
          loading="eager"
          src={Avatar}
          alt="Avatar"
          class="rounded-full w-16 h-16"
        />
        <div class="flex flex-col">
          <h1 class="text-2xl font-bold">
            Torben Haack
          </h1>
          <div class="flex items-center gap-2 text-black/50 text-sm">
            <span>[t128n]</span>
            <span>&middot;</span>
            <span>Berlin, Germany</span>
          </div>
        </div>
      </div>
      <ul class="flex flex-col text-right justify-end items-end">
        <li>
          <a
            href="https://github.com/t128n"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-1 text-black/70 text-xs"
          >
            <span>github.com/@t128n </span>
          </a>
        </li>
        <li>
          <a
            href="https://linkedin.com/in/torben-haack"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-1 text-black/70 text-xs"
          >
            <span>linkedin.com/in/torben-haack</span>
          </a>
        </li>
        <li>
          <a
            href="mailto:t128n@ipv4.8shield.net"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-1 text-black/70 text-xs"
          >
            <span>t128n@ipv4.8shield.net</span>
          </a>
        </li>
      </ul>
    </div>

    <p class="text-sm leading-relaxed">
      I design minimalist, scalable software with a focus on automation, CI/CD,
      and developer tooling. At Mercedes-Benz, I architect internal platforms
      that streamline engineering and industrial operations.
    </p>

    <!-- Experience -->
    <div>
      <h2 class="text-lg font-semibold mb-2 text-gray-700">Experience</h2>
      <table class="w-full text-xs table-auto">
        <thead class="border-b border-gray-300 text-gray-500 text-left">
          <tr>
            <th class="py-2 px-1">start_date</th>
            <th class="py-2 px-1">end_date</th>
            <th class="py-2 px-1">company</th>
            <th class="py-2 px-1">role</th>
            <th class="py-2 px-1">description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">2025-01</td>
            <td class="py-2 px-1">Present</td>
            <td class="py-2 px-1">Mercedes-Benz AG</td>
            <td class="py-2 px-1"
              >IT Architect, Software & Automation Engineer</td
            >
            <td class="py-2 px-1">
              Architect internal data platforms, CI/CD systems, test frameworks,
              and reproducible documentation pipelines.
            </td>
          </tr>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">2022-09</td>
            <td class="py-2 px-1">2025-01</td>
            <td class="py-2 px-1">Mercedes-Benz AG</td>
            <td class="py-2 px-1"
              >Apprentice (Computer Science – Data & Process Analysis)</td
            >
            <td class="py-2 px-1">
              Led automation initiatives, dashboards, and mentoring;
              standardized workflows and taught GitHub practices.
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Skills -->
    <div>
      <h2 class="text-lg font-semibold mb-2 text-gray-700">Skills</h2>
      <table class="w-full text-xs table-auto">
        <thead class="border-b border-gray-300 text-gray-500 text-left">
          <tr>
            <th class="py-2 px-1">category</th>
            <th class="py-2 px-1">skills</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">Architecture & Tooling</td>
            <td class="py-2 px-1"
              >Software Architecture, Developer Tooling, Test Automation</td
            >
          </tr>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">DevOps</td>
            <td class="py-2 px-1"
              >CI/CD Automation, GitHub Workflows, Containerization</td
            >
          </tr>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">WebDev</td>
            <td class="py-2 px-1"
              >Next.js, Tailwind CSS, shadcn/ui, Streamlit</td
            >
          </tr>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">Languages</td>
            <td class="py-2 px-1">Python, TypeScript</td>
          </tr>
        </tbody>
      </table>

      <div class="mt-4 text-xs print:hidden text-black/50">
        <a
          href="https://www.linkedin.com/in/torben-haack/details/skills/"
          target="_blank"
          rel="noopener noreferrer"
          class="hover:underline flex items-center gap-1"
        >
          &rarr; More skills on LinkedIn.
        </a>
      </div>
    </div>

    <!-- Projects -->
    <div>
      <h2 class="text-lg font-semibold mb-2 text-gray-700">Projects</h2>
      <table class="w-full text-xs table-auto">
        <thead class="border-b border-gray-300 text-gray-500 text-left">
          <tr>
            <th class="py-2 px-1">year</th>
            <th class="py-2 px-1">name</th>
            <th class="py-2 px-1">role</th>
            <th class="py-2 px-1">description</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">2025</td>
            <td class="py-2 px-1">MYP</td>
            <td class="py-2 px-1">(Capstone Project)</td>
            <td class="py-2 px-1">
              Enterprise-grade printer management system with SSO, RBAC,
              regression analytics, Podman deployment. Built with Next.js +
              TypeScript.
            </td>
          </tr>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">2024</td>
            <td class="py-2 px-1">PromptLab</td>
            <td class="py-2 px-1">Prototype Engineer</td>
            <td class="py-2 px-1">
              Modular prompt engineering tool with live previews, dynamic
              inputs, and a custom interpreter. Built with React, Radix UI, and
              Tailwind CSS.
            </td>
          </tr>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">2024</td>
            <td class="py-2 px-1">Korrektor</td>
            <td class="py-2 px-1">Prototype Engineer</td>
            <td class="py-2 px-1">
              GenAI refactoring assistant built with Streamlit and Ollama. Fast
              POC for rapid iteration in AI developer tooling.
            </td>
          </tr>
        </tbody>
      </table>

      <div class="mt-4 text-xs print:hidden text-black/50">
        <a
          href="https://www.linkedin.com/in/torben-haack/details/projects/"
          target="_blank"
          rel="noopener noreferrer"
          class="hover:underline flex items-center gap-1"
        >
          &rarr; More projects on LinkedIn.
        </a>
      </div>
    </div>

    <!-- Education -->
    <div>
      <h2 class="text-lg font-semibold mb-2 text-gray-700">Education</h2>
      <table class="w-full text-xs table-auto">
        <thead class="border-b border-gray-300 text-gray-500 text-left">
          <tr>
            <th class="py-2 px-1">start</th>
            <th class="py-2 px-1">end</th>
            <th class="py-2 px-1">institution</th>
            <th class="py-2 px-1">degree</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-gray-200">
            <td class="py-2 px-1">2022</td>
            <td class="py-2 px-1">2024</td>
            <td class="py-2 px-1">OSZ IMT Berlin-Neukölln</td>
            <td class="py-2 px-1"
              >Vocational Qualification in Computer Science (Grade 1.4)</td
            >
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</BaseLayout>

<script>
  const downloadButton = document.getElementById('download-resume-button');
  const resume = document.getElementById('resume');

  document.addEventListener('DOMContentLoaded', () => {
    if(!downloadButton || !resume) {
      console.error('Download button or resume element not found.');
      return;
    }
    downloadButton.addEventListener('click', () => {

    });

  });
</script>

<style is:global>
  @media print {
    /* Reset scroll behavior for print */
    html,
    body {
      overflow: visible !important;
      width: auto !important;
      height: auto !important;
      position: static !important;
    }

    /* Hide scrollbars in print */
    ::-webkit-scrollbar {
      display: none !important;
    }

    /* First hide everything */
    * {
      visibility: hidden;
    }

    /* Then show resume and all its children */
    #resume {
      padding: 2rem !important; /* .p-8 */
    }

    #resume,
    #resume * {
      visibility: visible;
    }

    /* Position the resume at the top */
    #resume {
      position: absolute;
      left: 0;
      top: 0;
      width: 210mm;
      min-height: 297mm;
      margin: 0 !important;
      padding: 2rem !important;
      box-shadow: none !important;
    }
  }
</style>
