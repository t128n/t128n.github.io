---
import { Icon } from "astro-icon/components";

/**
 * [Note]:
 * I'm currently not happy with this component.
 * Removing it client-side when ?ref=legacy somehow feels like
 * it could become a performance issue in the future.
 *
 * Won't include it in production builds for now.
 */
---

<script>
  if (typeof window !== "undefined") {
    const params = new URLSearchParams(window.location.search);
    if (!params.has("ref") || params.get("ref") !== "legacy") {
      document.querySelector("aside")?.remove();
    }
  }
</script>

<aside>
  <div>
    <Icon name="pixelarticons:warning-box" />
    <h2>Disclaimer</h2>
  </div>
  <p>
    You've landed on a legacy URL. For your convenience, you're being redirected
    to the latest version of this page. If you bookmarked the old link, please
    update it to avoid future surprises.
  </p>
</aside>

<style>
  aside {
    padding: var(--space-md);
    margin: var(--space-md) calc(var(--space-md) * -1);
    color: var(--color-bg);
    background-color: var(--color-ye);
    position: relative;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  aside > div {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  aside > div > h2 {
    font-size: var(--text-base);
    font-family: var(--font-mono);
  }

  aside > div > svg {
    width: var(--text-xl);
    height: var(--text-xl);
  }
</style>
